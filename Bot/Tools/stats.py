import base64
exec(base64.b64decode("aW1wb3J0IG9zCmltcG9ydCBwbGF0Zm9ybQppbXBvcnQgcHN1dGlsCmltcG9ydCBodHRweAppbXBvcnQgbXVsdGlwcm9jZXNzaW5nCmltcG9ydCBzaHV0aWwKaW1wb3J0IHRpbWUKCmRlZiBpc190ZXJtdXgoKToKICAgIHJldHVybiBvcy5wYXRoLmV4aXN0cygiL2RhdGEvZGF0YS9jb20udGVybXV4L2ZpbGVzL2hvbWUiKSAgIyBDaGVjayBpZiBydW5uaW5nIGluIFRlcm11eAoKZGVmIGdldF9zZXJ2ZXJfaXNwX2FuZF9sb2NhdGlvbihpcF9hZGRyZXNzKToKICAgIHRyeToKICAgICAgICByZXNwb25zZSA9IGh0dHB4LmdldChmImh0dHBzOi8vaXBhcGkuY28ve2lwX2FkZHJlc3N9L2pzb24vIikuanNvbigpCiAgICAgICAgY2l0eSA9IHJlc3BvbnNlLmdldCgiY2l0eSIsICJOb3QgRm91bmQiKQogICAgICAgIGNvdW50cnlfbmFtZSA9IHJlc3BvbnNlLmdldCgiY291bnRyeV9uYW1lIiwgIk5vdCBGb3VuZCIpCiAgICAgICAgb3JnID0gcmVzcG9uc2UuZ2V0KCJvcmciLCAiTm90IEZvdW5kIikKICAgICAgICByZXR1cm4gb3JnLCBmIntjaXR5fSAtIHtjb3VudHJ5X25hbWV9IgogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICByZXR1cm4gIk5vdCBGb3VuZCIsICJOb3QgRm91bmQgLSBOb3QgRm91bmQiCgpkZWYgZ2V0X3NlcnZlcl9vcygpOgogICAgcmV0dXJuIHBsYXRmb3JtLnN5c3RlbSgpCgpkZWYgZ2V0X3NlcnZlcl9yYW0oKToKICAgIHRyeToKICAgICAgICB0b3RhbF9yYW0gPSBwc3V0aWwudmlydHVhbF9tZW1vcnkoKS50b3RhbAogICAgICAgIHJldHVybiBmInt0b3RhbF9yYW0gLyAoMTAyNCAqKiAzKTouMmZ9IEdCIgogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICByZXR1cm4gIk4vQSIKCmRlZiBnZXRfc2VydmVyX2NvcmUoKToKICAgIHRyeToKICAgICAgICByZXR1cm4gbXVsdGlwcm9jZXNzaW5nLmNwdV9jb3VudCgpCiAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgIHJldHVybiAiTi9BIgoKZGVmIGdldF9zZXJ2ZXJfc3RvcmFnZSgpOgogICAgdHJ5OgogICAgICAgIGlmIGlzX3Rlcm11eCgpOiAgCiAgICAgICAgICAgIHRvdGFsX3N0b3JhZ2UsIF8sIF8gPSBzaHV0aWwuZGlza191c2FnZSgiL2RhdGEiKSAgIyBHZXQgVGVybXV4IHN0b3JhZ2UKICAgICAgICBlbHNlOgogICAgICAgICAgICB0b3RhbF9zdG9yYWdlLCBfLCBfID0gc2h1dGlsLmRpc2tfdXNhZ2UoIi8iKSAgIyBHZXQgcm9vdCBzdG9yYWdlIG9uIExpbnV4ICYgV2luZG93cwogICAgICAgIHJldHVybiBmInt0b3RhbF9zdG9yYWdlIC8gKDEwMjQgKiogMyk6LjJmfSBHQiIKICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgcmV0dXJuICJOL0EiCgpkZWYgZ2V0X3NlcnZlcl9pcCgpOgogICAgdHJ5OgogICAgICAgIHJldHVybiBodHRweC5nZXQoImh0dHBzOi8vYXBpLmlwaWZ5Lm9yZyIpLnRleHQuc3RyaXAoKQogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICByZXR1cm4gIk5vdCBGb3VuZCIKCmRlZiBnZXRfc2VydmVyX2NwdV91c2FnZSgpOgogICAgdHJ5OgogICAgICAgIHRpbWUuc2xlZXAoMSkgICMgU21hbGwgZGVsYXkgdG8gZ2V0IGFjY3VyYXRlIENQVSB1c2FnZQogICAgICAgIHJldHVybiBmIntwc3V0aWwuY3B1X3BlcmNlbnQoKX0lIgogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICByZXR1cm4gIk4vQSIKCmRlZiBnZXRfc2VydmVyX3JhbV91c2FnZSgpOgogICAgdHJ5OgogICAgICAgIHJldHVybiBmIntwc3V0aWwudmlydHVhbF9tZW1vcnkoKS5wZXJjZW50fSUiCiAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgIHJldHVybiAiTi9BIgoKZGVmIGdldF9zZXJ2ZXJfZGV0YWlscygpOgogICAgc2VydmVyX29zID0gZ2V0X3NlcnZlcl9vcygpCgogICAgaWYgbm90IGlzX3Rlcm11eCgpOgogICAgICAgIHNlcnZlcl9pcCA9IGdldF9zZXJ2ZXJfaXAoKQogICAgICAgIHNlcnZlcl9pc3AsIHNlcnZlcl9sb2NhdGlvbiA9IGdldF9zZXJ2ZXJfaXNwX2FuZF9sb2NhdGlvbihzZXJ2ZXJfaXApCiAgICBlbHNlOgogICAgICAgIHNlcnZlcl9pcCA9ICJIaWRkZW4gaW4gVGVybXV4IgogICAgICAgIHNlcnZlcl9pc3AsIHNlcnZlcl9sb2NhdGlvbiA9ICJIaWRkZW4iLCAiSGlkZGVuIgoKICAgIHNlcnZlcl9kZXRhaWxzID0gewogICAgICAgICJPUyI6IHNlcnZlcl9vcywKICAgICAgICAiSVAiOiBzZXJ2ZXJfaXAsCiAgICAgICAgIklTUCI6IHNlcnZlcl9pc3AsCiAgICAgICAgIkxvY2F0aW9uIjogc2VydmVyX2xvY2F0aW9uLAogICAgICAgICJSQU0iOiBnZXRfc2VydmVyX3JhbSgpLAogICAgICAgICJTdG9yYWdlIjogZ2V0X3NlcnZlcl9zdG9yYWdlKCksCiAgICAgICAgIkNvcmVzIjogZ2V0X3NlcnZlcl9jb3JlKCksCiAgICAgICAgIkNQVSBVc2FnZSI6IGdldF9zZXJ2ZXJfY3B1X3VzYWdlKCksCiAgICAgICAgIlJBTSBVc2FnZSI6IGdldF9zZXJ2ZXJfcmFtX3VzYWdlKCksCiAgICAgICAgIlByb2Nlc3MgSUQiOiBvcy5nZXRwaWQoKQogICAgfQoKICAgIHJldHVybiBzZXJ2ZXJfZGV0YWlscwoKZGVmIGZvcm1hdF9zZXJ2ZXJfbWVzc2FnZSgpOgogICAgZGV0YWlscyA9IGdldF9zZXJ2ZXJfZGV0YWlscygpCgogICAgbWVzc2FnZSA9IGYiIiI8Yj7wn5S5IFNFUlZFUiBNT05JVE9SSU5HIPCflLk8L2I+Cgo8Yj7wn5alIE9TOjwvYj4ge2RldGFpbHNbIk9TIl19IiIiCgogICAgaWYgbm90IGlzX3Rlcm11eCgpOiAgIyBPbmx5IHNob3cgSVAsIElTUCwgYW5kIExvY2F0aW9uIGlmIG5vdCBpbiBUZXJtdXgKICAgICAgICBtZXNzYWdlICs9IGYiIiIKPGI+8J+MjSBJUDo8L2I+IHtkZXRhaWxzWyJJUCJdfQo8Yj7wn5OhIElTUDo8L2I+IHtkZXRhaWxzWyJJU1AiXX0KPGI+8J+TjSBMb2NhdGlvbjo8L2I+IHtkZXRhaWxzWyJMb2NhdGlvbiJdfSIiIgoKICAgIG1lc3NhZ2UgKz0gZiIiIgo8Yj7wn5K+IFJBTTo8L2I+IHtkZXRhaWxzWyJSQU0iXX0KPGI+8J+TpiBTdG9yYWdlOjwvYj4ge2RldGFpbHNbIlN0b3JhZ2UiXX0KPGI+4pqZ77iPIENQVSBDb3Jlczo8L2I+IHtkZXRhaWxzWyJDb3JlcyJdfQo8Yj7wn5OKIENQVSBVc2FnZTo8L2I+IHtkZXRhaWxzWyJDUFUgVXNhZ2UiXX0KPGI+8J+TiCBSQU0gVXNhZ2U6PC9iPiB7ZGV0YWlsc1siUkFNIFVzYWdlIl19Cgo8Yj7wn5SiIFByb2Nlc3MgSUQ6PC9iPiA8Y29kZT57ZGV0YWlsc1siUHJvY2VzcyBJRCJdfTwvY29kZT4KIiIiCiAgICByZXR1cm4gbWVzc2FnZQoKIyBFeGFtcGxlIHVzYWdlOgo=").decode())